<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Salvar el mundo — iEvan709</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" href="data:,">
<style>
:root{ --bg:#0b0f1a; --panel:#111726; --card:#141c2e; --txt:#e8ecf1; --muted:#9fb0c7; }
*{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#0b0f1a,#0d1324 40%,#0b0f1a);color:var(--txt);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Noto Sans',sans-serif}
.wrap{max-width:1100px;margin:auto;padding:20px}
h1{margin:0 0 6px;font-size:24px}
.small{color:var(--muted);margin-bottom:16px}
.section{margin-top:16px}
h2{font-size:18px;margin:12px 0}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
.card{background:var(--card);border:1px solid #1b2440;border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
.thumb{position:relative;width:100%;padding-top:56%}
.thumb img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
.meta{padding:12px}
.title{font-weight:700;margin-bottom:6px}
.body{font-size:14px;color:#cfe0ff}
footer{margin:28px 0 8px;color:var(--muted);font-size:12px}
  .topnav{position:sticky;top:0;z-index:50;background:rgba(10,14,25,.8);backdrop-filter:blur(6px);border-bottom:1px solid #1b2440}
.topnav .wrap{max-width:1100px;margin:auto;display:flex;align-items:center;justify-content:space-between;padding:10px 16px}
.topnav a{color:#cfe0ff;text-decoration:none;padding:8px 10px;border-radius:10px}
.topnav a:hover{background:#1a2236}
.topnav .brand{font-weight:700;color:#fff}
.topnav .links a.active{background:#244077;color:#fff;border:1px solid #2b57a3}

.site-footer{border-top:1px solid #1b2440;margin-top:32px}
.site-footer .wrap{max-width:1100px;margin:auto;padding:16px;color:#9fb0c7}
</style>
</head>
<body>
  <div class="subnav wrap" style="margin-top:8px">
  <a href="/fortnite/" class="chip">Tienda BR</a>
  <a href="/fortnite/news.html" class="chip">Noticias</a>
  <a href="/fortnite/stw.html" class="chip">STW</a>
</div>
  <nav class="topnav">
  <div class="wrap">
    <a class="brand" href="/">ievan709.online</a>
    <div class="links">
      <a href="/fortnite/"           data-nav="tienda">Tienda BR</a>
      <a href="/fortnite/news.html"  data-nav="news">Noticias</a>
      <a href="/fortnite/stw.html"   data-nav="stw">Salvar al Mundo</a>
      <a href="/privacy.html"        data-nav="priv">Privacidad</a>
    </div>
  </div>
</nav>
  </div>
</nav>
<div class="wrap">
  <h1>Salvar el mundo</h1>
  <div class="small" id="date">Cargando…</div>

  <div class="section">
    <h2>Noticias STW</h2>
    <section class="grid" id="news"></section>
  </div>

  <!-- Próximamente: Misiones/Alertas/Llamas -->
  <div class="section">
    <h2>Próximamente</h2>
    <p class="small">Aquí mostraremos misiones, alertas y más (cuando definamos el/los endpoint/s).</p>
  </div>

  <footer>Fuente: Fortnite-API · Render por iEvan709</footer>
</div>

<script>
'use strict';
const dateEl = document.getElementById('date');
const newsEl = document.getElementById('news');

function card(n){
  const img = n.image || n.img || n.banner || n.tile || '';
  const body = n.body || n.tabTitle || n.message || '';
  const title = n.title || n.heading || 'Actualización';
  return `
  <article class="card">
    <div class="thumb">${img ? `<img loading="lazy" src="${img}" alt="${title}">` : ''}</div>
    <div class="meta">
      <div class="title">${title}</div>
      <div class="body">${body}</div>
    </div>
  </article>`;
}

fetch('https://fortnite-api.com/v2/news/stw?language=es',{cache:'no-store'})
  .then(r=>r.json())
  .then(j=>{
    try{
      const ts = j.data?.date || j.lastModified || Date.now();
      dateEl.textContent = 'Actualizado: ' + new Date(ts).toLocaleString();
    }catch{ dateEl.textContent = 'Actualizado'; }
    const motds = j.data?.motds || j.data?.stw?.motds || j.motds || [];
    newsEl.innerHTML = motds.map(card).join('') || '<p class="small">Sin noticias.</p>';
  })
  .catch(e=>{
    dateEl.textContent = 'No se pudieron cargar las noticias STW.';
    newsEl.innerHTML = `<p class="small">Error: ${e}</p>`;
  });
</script>
  <footer class="site-footer">
  <div class="wrap">
    <small>© 2025 ievan709 · Fuente: Fortnite-API · Sitio sin anuncios</small>
  </div>
</footer>
  <script>
  (function(){
    const p = location.pathname;
    const map = [
      {sel:'[data-nav="tienda"]', test: /^\/fortnite\/(index\.html)?$/},
      {sel:'[data-nav="news"]',   test: /^\/fortnite\/news\.html$/},
      {sel:'[data-nav="stw"]',    test: /^\/fortnite\/stw\.html$/},
      {sel:'[data-nav="priv"]',   test: /^\/privacy\.html$/},
    ];
    for (const {sel,test} of map){
      if (test.test(p)) { const el=document.querySelector(sel); el&&el.classList.add('active'); }
    }
    // Home activo si no estamos en /fortnite/*
    if (!/^\/fortnite\//.test(p) && p !== '/privacy.html'){
      const home = document.querySelector('.brand'); home && home.classList.add('active');
    }
  })();
</script>
</body>
</html>
